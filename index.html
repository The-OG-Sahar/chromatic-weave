<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chromatic Weave - Generative Art</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111;
            color: #f0f0f0;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        header {
            position: absolute;
            top: 20px;
            text-align: center;
            z-index: 10;
        }
        h1 {
            font-size: 2.5rem;
            font-weight: 600;
            margin: 0;
            background: linear-gradient(45deg, #ff6ec7, #7873f5, #4fc3f7);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        p {
            color: #aaa;
            margin-top: 5px;
        }
        #controls {
            position: absolute;
            bottom: 30px;
            z-index: 10;
            display: flex;
            gap: 15px;
        }
        button {
            background-color: #333;
            color: #fff;
            border: 1px solid #555;
            padding: 12px 25px;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        button:hover {
            background-color: #555;
            border-color: #777;
            transform: translateY(-2px);
        }
        #download-btn {
            background-color: #2a2a2a;
        }
        #download-btn:hover {
            background-color: #444;
        }
    </style>
</head>
<body>
    <header>
        <h1>Chromatic Weave</h1>
        <p>Generative art from algorithms</p>
    </header>

    <main id="canvas-container">
        <!-- p5.js will create the canvas here -->
    </main>

    <div id="controls">
        <button id="weave-btn">Weave New Art</button>
        <button id="download-btn">Download Image</button>
    </div>

    <script>
        // --- P5.JS SKETCH ---
        // This function runs once when the page loads
        function setup() {
            // Create a canvas that fills the window
            let canvas = createCanvas(windowWidth, windowHeight);
            canvas.parent('canvas-container');
            
            // Generate the first piece of art
            generateArt();
        }

        // This function runs every frame, but we only use it to draw once
        function draw() {
            // We leave this empty because we are generating static art
        }

        // --- ART GENERATION LOGIC ---
        function generateArt() {
            // A subtle dark background
            background(20, 20, 25);

            // --- CUSTOMIZE YOUR ART HERE ---
            
            // 1. Choose a color palette
            const palettes = [
                ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7'], // Sunset
                ['#F7DC6F', '#82E0AA', '#85C1E2', '#BB8FCE', '#F8B739'], // Pastel
                ['#E74C3C', '#3498DB', '#2ECC71', '#F39C12', '#9B59B6'], // Vibrant
                ['#6C5CE7', '#A29BFE', '#FD79A8', '#FDCB6E', '#6C5CE7'], // Dreamy
            ];
            let palette = random(palettes);

            // 2. Set the number of "threads" in the weave
            let threadCount = 150;

            // 3. Draw the "weave"
            noLoop(); // Stop p5.js from animating
            for (let i = 0; i < threadCount; i++) {
                push(); // Save the current drawing state
                
                // Randomize the line's appearance
                stroke(random(palette));         // Pick a random color from the palette
                strokeWeight(random(0.5, 2.5)); // Random line thickness
                let alpha = random(30, 90);     // Random transparency
                stroke(red(color(random(palette))), green(color(random(palette))), blue(color(random(palette))), alpha);

                // Create the curved path (a bezier curve)
                let x1 = random(width);
                let y1 = random(height);
                let x2 = random(width);
                let y2 = random(height);
                let cx1 = random(width);
                let cy1 = random(height);
                let cx2 = random(width);
                let cy2 = random(height);

                noFill(); // Don't fill the shape, just draw the outline
                bezier(x1, y1, cx1, cy1, cx2, cy2, x2, y2);

                pop(); // Restore the drawing state
            }
        }

        // --- INTERACTION CONTROLS ---
        document.getElementById('weave-btn').addEventListener('click', () => {
            generateArt();
        });

        document.getElementById('download-btn').addEventListener('click', () => {
            saveCanvas('chromatic-weave', 'png');
        });

        // If the window is resized, regenerate the art to fit
        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
            generateArt();
        }
    </script>
</body>
</html>
